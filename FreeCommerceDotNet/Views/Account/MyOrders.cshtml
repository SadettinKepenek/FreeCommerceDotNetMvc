@using FreeCommerceDotNet.Entities.Concrete
@model List<OrderMaster>
@{
    ViewBag.Title = "My Orders";
    Layout = "~/Views/Shared/_LayoutFrontEnd.cshtml";
}

<div class="breadcrumb-section">
    <div class="container">
        <div class="row">
            <div class="col-sm-6">
                <div class="page-title">
                    <h2>Dashboard</h2>
                </div>
            </div>
            <div class="col-sm-6">
                <nav aria-label="breadcrumb" class="theme-breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                        <li class="breadcrumb-item active" aria-current="page">Dashboard</li>
                    </ol>
                </nav>
            </div>
        </div>
    </div>
</div>
<!-- breadcrumb End -->
<!-- section start -->
<section class="section-b-space">
    <div class="container">
        <div class="row">
            <div class="col-lg-3">
                <div class="account-sidebar"><a class="popup-btn">my account</a></div>
                <div class="dashboard-left">
                    <div class="collection-mobile-back"><span class="filter-back"><i class="fa fa-angle-left" aria-hidden="true"></i> back</span></div>
                    <div class="block-content">
                        <ul>
                            @*<li><a href="#">Address Book</a></li>*@
                            <li class="active"><a href="#">Account Info</a></li>
                            <li><a href="~/Account/MyOrders">My Orders</a></li>
                            <li><a href="~/Account/MyWishList">My Wishlist</a></li>
                            <li><a href="#">Newsletter</a></li>
                            <li><a href="~/Account/Settings">My Account</a></li>
                            <li><a href="~/Account/ChangePassword">Change Password</a></li>
                            <li class="last"><a href="#">Log Out</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-lg-9">
                <div class="dashboard-right">
                    <div class="dashboard">
                        <div class="page-title text-center">
                            <h2>My Orders (Last 3 Orders)</h2>
                        </div>
                        <div class="container-fluid">
                            <hr/>
                            <div class="row">
                                @foreach (OrderMaster item in Model.Skip(Math.Max(0, Model.Count() - 3)).OrderByDescending(x => x.OrderDate))
                                {
                                    <div class="col-sm-4" style="margin-bottom: 12px">
                                        <div class="card" style="width: 18rem;">
                                            <div class="card-body">
                                                <h5 class="card-title">Order Number @item.OrderId</h5>
                                            </div>
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item">Order Date : @item.OrderDate</li>
                                               
                                                <li class="list-group-item">Delivery Status : @item.DeliveryStatus</li>
                                                <li class="list-group-item">Delivery Date : @item.DeliveryDate</li>
                                                
                                                <li class="list-group-item">Payment Gateway : @item.PaymentBm.PaymentName</li>
                                                <li class="list-group-item">Shipping Gateway : @item.ShippingBm.ShippingName</li>
                                                <li class="list-group-item">Total Product Count : @item.OrderDetails.Count</li>

                                                <li class="list-group-item"><strong>Order Subtotal : <span style="color: red">@item.OrderDetails.Sum(x => x.ProductPrice)</span> ₺</strong></li>
                                            </ul>
                                            <div class="card-body text-center">
                                                <a href="~/Account/OrderDetail/@item.OrderId" class="card-link">Order Detail</a>
                                            </div>
                                        </div>
                                    </div>
                                    
                                }
                            </div>
                          
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- section end -->
